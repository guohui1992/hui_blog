# 构建 VitePress 站点并将其部署到 GitHub Pages 的示例工作流程  
#  
name: Deploy VitePress site to GitHub Pages  
  
on:  
  push:  
    branches: [master]  
  workflow_dispatch:  
  
permissions:  
  contents: read  
  pages: write  
  id-token: write  
  
concurrency:  
  group: pages  
  cancel-in-progress: false  
  
jobs:  
  build-and-deploy:  
    runs-on: ubuntu-latest  
    steps:  
      - name: Checkout  
        uses: actions/checkout@v3  
        with:  
          fetch-depth: 0  
  
      - name: Setup Node  
        uses: actions/setup-node@v4  
        with:  
          node-version: 21
          cache: yarn  
  
      - name: Install dependencies  
        run: yarn install
  
      - name: Build with VitePress  
        run: yarn docs:build  
  
      - name: Move build output to subdirectory  
        run: mv docs/dist hui_blog
  
      # 使用官方的 GitHub Pages 部署 action  
      - name: Deploy  
        uses: JamesIves/github-pages-deploy-action@releases/v4  
        with:  
          branch: gh-pages # 部署分支，GitHub Pages 默认是 gh-pages  
          # folder: docs/dist # 构建输出的目录  
          # 如果你移动了构建输出到子目录，请修改这里的路径  
          folder: hui_blog # 构建输出的目录  
          clean: true # 在部署前清理 gh-pages 分支